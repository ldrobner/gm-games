trade balancing
- https://old.reddit.com/r/BasketballGM/comments/ja6095/want_to_test_some_improvements_to_the_trade_ai/g9ac541/
- https://discord.com/channels/290013534023057409/290015591216054273/767875431310688296

AI re-signing is just player mood + trade function

schedule editor

star icon next to year player was all star
- maybe championship and mvp too?

start in any phase
- later
  - get rid of keys.push("playoffSeries", "draftLotteryResults", "draftPicks");
    - need to improve LeagueMenu so fetching leagueInfo depends on both season and phase forms
  - start before expansion draft
  - start before draft lottery
  - support starting after playoffs even if there is an expansion draft
    - for 1947/48, ignore weird 2nd round picks and clone 1st round order for 2nd round
    - expansion team should be selectable
  - add player stats if phase after regular season
    - advanced stats will require team stats too... sum up from players?
    - advanced stats and other missing values, calculate on load?
  - what about changes to settings (like playoff settings, etc), does it need to store previous season's value too?
  - what about seasons with expansion teams?
    - tricky for draft, since it should have expansion draft as already happened... maybe disable those years
      - could get results of expansion draft and assing those players to team!

trade stuff
- flag to make fudge factor not apply for ai-ai trades
- more penalty for bad contracts

AI teams should release players if better FAs are available
- draft picks after first season, especially

name/colleges revamp
- races
  - @ClevelandFan#6181 can help
  - playerBioInfo.countries[].races?: Record<Race, number>,
  - defaultRaces: Record<Country, Record<Race, number>>
  - CSV in tools, generate JSON like names, print countries missing
    - incorporate group info from defaultCountries.groups, or just import defaultCountries after generating names json
  - default values for individual countries
  - new release of faces.js, and upgrade
- global default... should it override individual countries?
  - distinction between "default if unset in built-in defaults" and "override built-in defaults too". add some other property like defaultAll that overrides everything, with same format as default
- flag icon on roster page
  - https://github.com/lipis/flag-icon-css

centralize player action buttons
- buttons
  - Draft
  - Trade For
  - Trade Away
  - Negotiate
  - Sign
  - Release
- option to pick which to show, so it can replace NegotiateButtons
- show in player stats/ratings/bios tables? and roster, player profile?
- button group, or single button with dropdown
- help popover in column explains stuff, and text on confirm windows

contract extensions, available if player mood is high enough and contract is expiring

No trades or other finance/roster moves while job offers
- https://old.reddit.com/r/BasketballGM/comments/iz8bvk/exploit_1_get_job_offer_2_trade_all_of_your_stars/

AI control buttons
- handle lineup sorting automatically https://discord.com/channels/@me/713482931447791648
- retire jerseys automatically

https://reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html

GM face in team history page
- saved faces in account?
- allow overriding for specific league, or linking to one from your account (requries sync)

finances revamp
- get rid of raw $ amounts https://old.reddit.com/r/BasketballGM/comments/hvkmsp/icymi_2706_is_nowthe_lowest_you_can_spend_on/fyubmr8/?context=3
- https://old.reddit.com/r/BasketballGM/comments/ir5rbf/suggestions_for_finances_overhaul/

redo mood system
- some way to see how it changes during FA - show probability? show # days until willing?
- customizable columns on roster page
- later
  - moodComponents.playingTime for football - based on depth chart
  - table showing all of the mood components as columns
  - should affect trades

player development - less correlation betwen ratings
- https://github.com/nicidob/gm-games/commit/fec2175636191ca96b60912601b3212be03bb7ad

gm score
- @nicidob
- almost like this https://fivethirtyeight.com/features/billion-dollar-billy-beane/ f(profit,win%,playoffRoundsWon)
- show on GM History
- fully dynamic, or store in TeamSeason?
- same as the owner mood score?

taller players should get injured more

option in team history to have AI auto retire jerseys

AI re-signing logic

ratings stats popover should be based on year and allow switching https://media.discordapp.net/attachments/713482931447791648/755051634890899516/unknown.png?width=1439&height=71 @ninjasean56

offseason recap page https://old.reddit.com/r/BasketballGM/comments/im6pfb/suggestion_offseason_recap_menu/

injury notification in news feed should show ovr/pot drop

play menu race condition @whitecow ~/Downloads/BBGM_Sim_Bug.mp4

wordmarks on team history https://old.reddit.com/r/BasketballGM/comments/ik1kif/one_idea_for_use_of_the_secondary_wordmarks_for/

individual player determinism https://old.reddit.com/r/BasketballGM/comments/ij0bi7/would_it_be_possible_to_make_player_determinism/

salaries wrong after expansion draft? https://cdn.discordapp.com/attachments/290015591216054273/750472674953920572/unknown.png

When changing the jersey number on a player acquired in FA it also changes what that player's jersey number was on his previous team, despite him being signed to a different team now
- need to treat jerseyNumber like teamSeason stuff (name, etc) - store "latest" in root, and copy from there when making new stats row, if possible

Add game log to player page

option to disable unimportant notifications
- https://old.reddit.com/r/BasketballGM/comments/ier26k/pop_ups_disable/
- sirlamegame

frivolities
- add WS/player for colleges/countries
- players
  - best contract (maybe WS:contract ratio? or WS minus "expected WS for that contract"?)
  - worst contract
  - most games missed to injury in career
- team seasons
  - most consecutive seasons w/ championships/finals/playoffs/no-playoffs
  - best playoffs (record in individual playoffs)
- playoffs
  - playoff seeding, like number of times an 8 seed won @Tuxie93
- best trades

nicidob PRs
- player overall ratings
  - maybe use new formula from other PR
- team overall ratings

nicidob trade

jersey numbers
- higher limit for AI teams, and make panel collapsable
  - https://old.reddit.com/r/BasketballGM/comments/i55hvu/ai_jersey_retirement/g0onh40/?context=3
- AI unretiring jerseys should be based on WS
- later
  - better system to resolve conflicts (better player gets the number)
  - prompt to pick number of newly acquired players
  - add jersey retirement to awards list
    - No. 77 retired by the AAAA
    - tricky when user edits, would need to update player
  - notifications in news feed
    - redundant with HoF?

in box score, show graphs of score and win probability

nicidob contract stuff
- https://raw.githubusercontent.com/nicidob/bbgm/master/cbb_roster_2020.json << if u set max salary to 30M, lots of players go unsigned
  - seems to be related to number of teams... https://raw.githubusercontent.com/nicidob/bbgm/master/history_final.json has a milder version of the problem
  - also, it's really slow to do the bidding with so many teams/players
- FBGM - introduce team value into auction, for better position-specific contracts, based on team needs
  - https://github.com/nicidob/bbgm/commit/e795aea66917997b1ddbede8adc33b6ca20086f4
  - see new note in sn
- eventually
  - eliminate all genContract

team Offensive Rating and Defensive Rating on Roster screen? (not just MOV?)
- nicidob

jersey styles by team

jeresy style in teamseason

cap evolving over time

option to include historical players/stats when creating a real players league
- should it include 1 season of stats by default, for MIP?

rebuilding/contending in the old days https://old.reddit.com/r/BasketballGM/comments/hytv2e/whats_the_best_way_to_trade_for_good_draft_picks/fzf4iap/?context=3

option to lock ratings for all players, including future players

FBGM make ratings improvements less correlated

nicidob new ovr formula
- basketball: https://github.com/dumbmatter/gm-games/pull/275/files
- football: https://paste.ubuntu.com/p/H5pPmb3r6J/
  - nicodob says:
    - as I said I rewrote this code (b/c I'm doing the testing on a different computer) and the PR uses .csv exports but this version uses .json leagues. https://github.com/nicidob/fbgm/blob/master/ratings.ipynb
    - that does the ratings and vomits out the over_under roster
    - as-is it basically eats FBGM or BBGM leagues up. It does the position-specific code. So to replicate the PR I just replace the pos = r['pos'] with pos='ALL' and the code is happy to do it
    - yeah I mean there's a handful of differences here. this uses JSON leagues (not a split 'avg.csv'/'game.csv'), and does position-specific breakdowns. But yes it's the same thing, it takes leagues with box scores and does minute-weighted rating differences to MOV for individual games
    - it also doesn't do the scaling to ensure the mean and variance are unchanged (i just check R^2 and move on)
    - And here I'm using L1 Regularization + Cross-Validation to drop a bunch of coefficients to zero for ratings that don't matter
    - the problem is i got really wonky distributions when I tried to output the FBGM stuff
    - like I don't understand how mean/variance are set by the code right now
    - the notebook spits out a copy+paste table for ovr.football.ts and I have a local copy with it but the numbers are big and positions are set - wrong because I deleted bonuses and.....
    - it was non-obvious to me how to get these in-game in a good way so I don't have a good PR

built-in UI to load custom user files
- UI in BBGM to create league
  - api to list league files
  - page in BBGM to list the league files, with links that go to the new league form pre-populated with that URL for a league file
- limit users who can upload
  - gwood
- database table to store metadata
  - id
  - user_id
  - sport
  - name
  - description
  - num_leagues_created
  - last_updated
  - version (increment every update, keep in URL)
- CRUD UI for people to upload/edit/delete league files

gradually reveal progs mode
- displayed ratings are f(t, current ratings, last year's ratings)
  - after like half the season, always just current ratings. prior to that, depends on phase and games played
  - reveal with some polynomial, like x^n, so it's not predictable if a small increase will lead to a big increase later

DataTable
- places to use sortValue (implemented) and searchValue (not implemented yet):
  - ImportPlayers inputs
  - Height/Weight in PlayerBios needs searchValue
  - NegotiateButtons (search for negotiate/refuses)
  - sorting by skills on draft history
  - would allow sorting by checked/unchecked for trade and trading block
  - get rid of awkward children stuff - PlayerNameLabels, mood, ...
    - then get rid of react-addons-text-content

allow user to cancel relocation if it's their team?
- what about contraction, what would that imply for future events?

contract formatting https://old.reddit.com/r/BasketballGM/comments/hotbbw/small_readability_issue_inconsistent_decimals_on/
- always show 2 decimal places?
- right align, and use tabular-nums so numbers are aligned?

ties in PlayerFeats show up as W/L

The spending page needs to fixed. Either change the "finances" so you select "spending rank" (1st thru 30th) or make the finance system actually use cardinal values. right now it's confusing for new players and kinda annoying to set yourself as first the in the league (guess + check)

in fbgm players recover from injury during the FA period if they are in FA, but not if they are on a team

popover positioning
- https://old.reddit.com/r/BasketballGM/comments/hmgodu/bug_first_click_on_a_players_ratings_places_popup/fx5zhtl/?context=3
- https://github.com/react-bootstrap/react-bootstrap/issues/5270

in GM DL/LB/S are kinda the same. In real life, they're usually humans of different sizes
- 40 times tell the defensive positions apart: 4.5 for CB, 4.7 for LB, 4.8 for DE
- shuttle times tell DE/DT from LB
- S should be closer to CB than LB, and there should be less jumping around from genRatings.football
- player generator should be more rigid, based on input position. especially for offense/defense, like CBs who are decent RBs
  - could throw out ones who slide over to other position
  - or add less randomness
  - or change ovr formula
- "a decent chunk of DBs in real life produce stats that FBGM never generates"
  - needs more positive outliers

import/export players
- maybe
  - export
    - table alignment
      - skills and button are a little too big
  - import
    - checkbox to keep or delete history (stats, ratings, awards, HoF)
    - add import to event log? for individual player, or aggregate?

GM summary screen
- https://old.reddit.com/r/BasketballGM/comments/hf4a15/my_simple_concept_for_a_gm_page_that_i_whipped_up/

scheduled events editor
- eventually add/edit/delete individual events
  - needs to handle tids, like already happens for adding/removing teams
  - warn about breakage, like a team changing divisions if division expansion doesn't happen
  - delete, or just disable?
    - if delete expansion, need to delete future events for that tid and adjust other tids
    - when deleting individual expansion draft, make sure to account for the fact that you could have a team that was created in a prior expansion draft, so its tid might still exist (and not require adjusting of future teams)
  - add - check for dupe one already existing (by season+type and maybe tid)
  - edit
    - game attributes - share code with god mode settings
    - open modal on click "edit", or inline form

more realistic free agents when generating league
- look at retired young players from previous season

customizable columns in datatable
- future
  - SortableTable
  - supercols
    - change input format to be associated with these index numbers, then can derive which should be shown and where
    - or, change cols input to include flag for which supercol a col belongs to
    - but for MVP, no customization of supercols tables
  - always return all stats and ratings?

add average team age to power rankings @TheRealGWood#4891 
- save to teamSeason at end of season, along with ovr and any other things on power rankings page
- for current season, compute dynamically

from survey
- people really like looking back at history
- people really want better playing time control
- player comparison should be better
  - https://bbgm6man.eiphi.eu/
- team comparison should be better
- better international name options
- player mood revamp (bigger contract, ring-chasing, etc)

@Sniksir#7396 A button to completely clear either side of the trade window would save a ton of time.

legendary seasons
- best winp season of each team
- by decade?

roy formula, value counting stats more

custom league generator
- any historical team, with or without real players
- any fake team
- user defined teams

fuzz/scouting revamp
- prospects and young players only
- fuzz is deterministic noise

wrong team abbrev on player history https://old.reddit.com/r/BasketballGM/comments/gzd6qm/standings_now_show_when_teams_clinch_the_playoffs/ftfnuth/?context=3

add records to top scroll on desktop https://old.reddit.com/r/BasketballGM/comments/gyc615/news_feed_changes_are_live_in_version_202006070785/ftg0cvm/?context=3

way to save/load leagues on server
- ~/projects/google-drive
- MVP
  - import league from google drive
    - show files we have access to
  - export league to google drive rather than file
    - still need to track googleFileID, so it won't create a new file every time you export to drive
    - option to create new file or overwrite existing one
- Cloud
  - authorize and sign out buttons for google
    - https://developers.google.com/drive/api/v3/about-auth#save_refresh_tokens_in_long-term_storage
  - list of leagues in cloud
    - delete button
      - when deleting, delete file ID from local leagues too
    - rename button
    - link to create a new league with cloud file
  - https://developers.google.com/drive/api/v3/picker to add more files to list?
- Dashboard
  - link to Cloud page, and explanation if not logged in
  - for a league linked to a cloud save (with googleFileID etc)
    - if lastPlayed is greater than googleLastSync, show button to save changes to the cloud
    - if version in cloud is greater than googleFileVersion, show button to overwrite league with latest from cloud
    - if both of those things are true, show warning
  - for a league not linked to a cloud save (googleFileID is undefined)
    - show button to upload to cloud
  - some way to import leagues from the cloud (maybe another "New League" button, and support "Import" over existing one too)
  - some way to delete things from cloud
    - deleting a league locally should pop up an option of if you want to delete from cloud
  - design
    - condense some columns (name, team, difficulty) into one
    - add column for # seasons played
- Data stored locally
  - in each league, store google file ID, version, and timestamp of last sync (download or upload) w/ cloud
    - googleFileID
    - googleFileVerison
    - googleLastSync
- API
  - should this run all client side, or do we need a server side component?
    - try all client side first
  - authentication
    - https://developers.google.com/drive/api/v3/quickstart/js
    - store all keys and gapi object in worker
  - get list of cloud saves, including google file ID, BBGM league ID, last time played, and last phase/season
    - how to search for them? https://developers.google.com/drive/api/v3/properties says it is possible
      - https://developers.google.com/drive/api/v3/reference/query-ref
  - download existing save by google file ID
  - upload new save
  - update (overwrite) existing save
  - delete save
- for multiplayer leagues, some way to support other people having read access to a league
  - manual input of file ID or URL
- store on my system (s3 maybe) or use google drive?
  - google drive
    - https://developers.google.com/drive/api/v3/reference/files could put metadata in "properties"
      - use that to store some unique ID of the save
    - UI integration https://developers.google.com/drive/api/v3/about-apps
    - thumbnail https://developers.google.com/drive/api/v3/create-file#upload_thumbnails
    - challenge - how do i stream data out of IndexedDB and into Google Drive?
      - ideally would send data from IndexedDB to WritableStream to some HTTP API, but that doesn't seem supported - https://github.com/whatwg/fetch/issues/378 for the HTTP request, but also it's a problem with IDB auto closing transactions
      - so would need to read entire league file into memory first

god mode stuff
- more stuff on player editor
- awards editor
- pick all stars, and captains
- edit list of injuries, deaths

add option to disable salary cap @hrmantovani#2284 
- historical leagues
- merge with hard cap setting
- salary cap value is still inflation

FBGM
- retirement age
  - increase roster size limit to 55
- when it says 'QB's name drops back to pass' the score summary says 'QB passed to WR for an x yard touchdown!'
- when the ball is turned over, instead of a new set of downs, you start where the other team left off
- Some automatic first down penalties result in 1st and 1
- some penalties push team into endzone
  - https://mail.google.com/mail/u/0/#inbox/FMfcgxwHMGGpznWHgLkCNTbcXJbzZLzp
  - https://discord.com/channels/290013534023057409/290015591216054273/763398810549354517
- in FBGM, tags aren't generated for custom roster's draft classes until the end of the season.
- rosters https://raw.githubusercontent.com/nicidob/bbgm/master/fbgm_roster_2019_sss.json
- kneeling at end of games
- some OL stat
- increase value of K/P so they won't be traded for nothing
  - user report of K/P being released by AI teams during season
- smarter cutting when over roster limit (like don't cut only K/P)
- easier position changes, maybe from roster or player pages
  - auto sort roster after? or maybe have option to set if user controls roster sort or not
    - default should be "not"
- Add the release and trade away buttons to the depth chart screen. I find myself flipping back and forth from the depth chart and roster.
- Add the roster composition to any roster type screen like draft, depth chart, and trade screens.
- trade possible after playoffs phase begins, but only before first playoff game is played?
- weird offensive holding application https://old.reddit.com/r/Football_GM/comments/i33wix/penalties_wonky/g1073zl/?context=3
- DL in FBGM get way too many interceptions, CB should get more
- in FBGM, during the FA period with 30 days: injured players on rosters will not recover a single week if you sim to 1 day left in FA; injured players in fa will recover a week in every day of FA (30 weeks total)
- in OT, if the other team has already scored a FG, never punt!!!
- better support for running QBs to put up big numbers
- penalties accepted when normal gain would have been better
  - https://mail.google.com/mail/u/0/#inbox/FMfcgxwJZJZkXTNBnKVDvKLkMfMMTZdG
  - https://i.imgur.com/qb1Fuhf.png

eventually
- what happens to scheduled event if the user changes something relevant to it prior to the event happening? does this matter?
- show draft prospects separately when creating a new custom league, to allow creating one without them

manually specify draft order in god mode
- make draft page drag-and-drop, with purple handles
- dropdown to force lottery winners
  - would need to deal with coin flips for ties not making the top N reliable

add logos to league history table?

option to have numeric game attributes (salary cap, shooting tendencies) increase by a constant amount of a multiple
- check if upcoming scheduled event and noop if there is one

redo trade system
- make it so that teams are less likely to trade for players when there is a better/ slightly worse player in FA for around the same price. people exploit that all the time
- some factor based on # of recent trades (similar to player mood revamp?)
- value of picks should depend of draftType setting

team needs/synergy display on roster
- and power rankings

---

BAA teams should enter with intact rosters, not expansion draft

way to bulk delete leagues
- replace "delete all leagues". show checkmarks next to leagues, including "check all" button and a delete button

handle abbrevs changing over time without breaking URLs by appending _tid to abbrev in URL
- any abbrev returned in stats or ratings from playersPlus is wrong
  -  see tidAndSeasonToAbbrev in most.ts for how to do it right
- using team*Cache from UI is probably wrong too

in leagues with no 3 pointers, 3 pointers should not be tracked
- shot locations?

relocation fun stuff
- would be cool to let people cancel a relocation of their team
  - could prompt them, and then if they say no still move their cid/did but leave the rest alone
- would be cool to let people move their team (and rebrand) by spending $

ovr formula should change depending on game simulation settings, especially 3 point shooting

what would it really cost to store all game sim results?

better changelog
- everything from CHANGELOG.made
- show in modal

way to clone a player

way to bookmark trades

player stats popover
- stats relative to league average
- ovr/pot graph over time
  - put this on player page too
  - https://old.reddit.com/r/BasketballGM/comments/g4m90u/suggestion_player_progression_graphs/

fuzz doesn't really make sense
- have it decrease as a player plays. so high only for draft prospects or unknowns

add copy league function
- https://old.reddit.com/message/messages/nmnr87

better trade finder AI
- handle salary matching constraint
- use in trading block, and betweenAiTeams
- after doing this
  - make sure big trades happen enough in betweenAiTeams - see random.choice weights in betweenAiTeams
  - also make sure betweenAiTeams doens't accept really bad trades, see dv2 check
    - especially for minor trades, not sure if dv as an absolute value rather than % makes sense

global key info (salary, days until playoffs, team  etc)
- league info: days until playoffs, standings/series
- finance info: salary, relative to cap and luxury tax. expiring contracts
- team info: needs (like... rebounding, perimeter defense, shooting, etc)
- ronen

condensed/composite rating views
- athleticism, shooting, defense, playmaking
- on ratings table, elsewhere?
- ronen

box score - more info
- playoff series record
- regular season team records http://www.reddit.com/r/BasketballGM/comments/2dkpzw/request_team_record_in_box_scores/
- team ratings (for active players in game)
- live
  - timeouts
  - football: position on field

redesign dashboard
- include some historical context
- top FAs
- award races
- injuries
- draft picks owned, and rank of team
- top draft prospects

events revamp
- eventually
  - nothing should be lost, ever
  - store info about trade, so the summary of a trade can be linked to
    - for traded picks, store info so eventual picked players can be filled in later
  - like trade above... all events should not have premade text, but instead have the metadata to generate it. then can do things like including RatingsStatsPopover
  - in playoffs, recovery should only be notable if the team is still alive
  - include all time records being broken, like career scoring, etc
  - merge some together
    - expansion draft teams in one event
    - contraction teams in one event

support changing team logos at any season, from predefined real team logos
- future
  - handle if the user edits something but realTeamInfo specifies an override
    - could check if the pre-overridden value is the previous override or not
    - could add a flag to track if a field has been edited or not
    - neiether of those is perfect
  - make player photo overrides dynamic too?

game sim improvements
- big men should shoot fewer 3s, and shoot better at the rim https://old.reddit.com/r/BasketballGM/comments/g26svo/all_of_bbgms_game_simulation_flaws_in_a_single/
  - https://discordapp.com/channels/@me/604773209837010944/700376777473654784
- ask what kind of players are not common enough

gm history page
- like team history, but for the teams you GMed
- allow switching after season without getting fired

some kind of global status/finances menu, above titlebar
- EVENTUALLY
  - more info, not just games
    - progress bar showing phases, completion of season
    - mobile: only show either games or other info, with toggle between them
- scrollable
- animation on show/hide of LeagueTopbar
- some way to "lock" it so it stays fixed to the top of the screen

more animations
- RatingsStatsPopover modal opening
- games log
- schedule

average roster age implemented as team advanced stat?

page showing scores by day

pages for each playoff series https://www.reddit.com/r/BasketballGM/comments/4qjahi/minor_suggestion_generate_separate_pages_for_each/

login issues
- DefinitelyNotDonaldTrump on discord can help debug
  - from his debugging so far, the response from login.php is correct and the redirect to the account page happens, but local.username is still ""
    - is it not working correctly, setting through localActions?
    - or is it being overridden somewhere, like due to cross tab communication or the worker?
  - also says it happens on both BBGM and FBGM, and that it happens regardless of how many windows are open
  - console.log(document.cookie) - he says this returns an empty string, so i guess the cookie isn't being set somehow
    - would explain things, if cookie was not being set somehow. but should also be checked on account.basketball-gm.com directly

add toggle to table, to turn it into a heatmap showing which values are high or low. like think on a player stats table

FBGM punt when down in OT https://cdn.discordapp.com/attachments/290015591216054273/690387745042071592/Screenshot_2020-03-19_at_9.34.14_PM.png

make the 3 year delayed effect of team finances more obvious

teams play better/worse when down/up
- 10 point gap equals home court advantage
  - implementing exactly this would require letting player composite ratings change every possession... maybe too complicated
- @nicidob
- reference http://apbr.org/metrics/viewtopic.php?f=2&t=8501&start=0 in comment
- https://github.com/dumbmatter/gm-games/pull/276

GUI to add countries, colleges, and names

football rookie contract scale
- https://old.reddit.com/message/messages/mfpqf1

redesign splash page
- https://twitter.com/i/events/879086180909764608?lang=en
- https://twitter.com/steveschoger/status/935541212626464770/photo/1
- https://medium.com/refactoring-ui/7-practical-tips-for-cheating-at-design-40c736799886
- other pages?
  - https://twitter.com/steveschoger/status/913062604540653568/photo/1

player page UI improvements https://old.reddit.com/r/BasketballGM/comments/fbja8g/more_ideas/
- deltas for ratings at the top
- highlight ratings based on comparison to position average (maybe like popover)

more dynamic contracts, based on available cap space
- things this would enable
  - sliders to control talent levels
  - @nicidob Add an option to float the salary cap. Have it come from something like Sum(hype * population). So if NY/LA/CHI/MXC have bad teams, it's worse! Maybe even have hype depend on team rating (so if the whole league is playing crappy teams then the cap goes down).

error if cid/did mismatch on imported team
- tell nicidob when i do this
- better - set cid on import, and log warning to console

add player who tackled to play by play
- Nate Oor Completed to pass to Jake buttham (Tackle by Shaun boof)
- https://discordapp.com/channels/@me/625036115497451609

in watchlist, if you have a player play the prior  year's playoffs and then they get an injury that keeps them out of the playoffs, it displays last year's playoff stats
- https://cdn.discordapp.com/attachments/290015591216054273/679836680420589690/unknown.png

Game list redesign
- later
  - show ovr in box score too
  - show player with highest game score under completed game

teamRegion in playersPlus needed?

sw cache issue
- might have been due to index.html being cached by cloudflare. that's disabled now (feb 8). it things don't improve, add logging in sw.js to send version to index.html, and then attach that to error log in bugsnag
- could also store quota amount in log
- looks like it could be old sw staying active somehow
- try to reproduce on low disk space

nicidob - Something like "Team Hall of Fame" based on wins/MOV/playoff. And some way to see in-season MOV graphs, and multi-season MOV/Win%/PowerRanking

Jofish - when you make a move that causes an error in your roster (i.e. not enough/too many players) and try to simulate the all-star game, it freezes. I understand that the game still has to check if the rosters are proper, however, there is no warning given. Even though it doesn't make sense that the user's roster has to comply within the league even though it's the all-star game, a simple warning given would be nice

turnover in 2 point conversion -> wrong team still kicking off, wtf

probGoForIt should account for being down by a FG or less late in the game

FBGM football sim bugs
- pass interference not giving first down https://old.reddit.com/r/Football_GM/comments/emhcfy/pi_penalty_not_resetting_to_1st_down/
- negative yard line https://i.imgur.com/fSHX6md.png
  - https://i.redd.it/r06r5jxc6ei51.png
- penalty on punt gives first down plus punt yardage https://cdn.discordapp.com/attachments/726675205669388293/733114315397136505/image0.jpg
  - https://media.discordapp.net/attachments/569726303926878219/738325008895705158/EvilQBFromChicagoZachTodd01.JPG?width=1141&height=581

add kneeling to run out the clock

typescript
- to do
  - types for toWorker
    - flatten into a single object, rather than having "type". this will make typing the inputs and outputs easier
    - test with tradeCounterOffer
    - see OfferType
    - if it's possible to make it work with no explicit array passed for optional args, do same in toUI
  - backboard -> idb
    - my branch has two fixes:
      - https://github.com/jakearchibald/idb/pull/151
      - https://github.com/jakearchibald/idb/issues/152
  - any -> unknown
    - also in dependencies, like bbgm-router
  - @ts-ignore still needed? maybe write script to check
- later
  - playersPlus
    - finish teamsPlus first, it's easier!
    - probably not worth attempting until there is a better way to share code. like anything in overrides is a problem cause it's not statically analyzable, including STATS_TABLES

unify "More" links

switch Dropdown to DropdownLinks rather than Select?
- see how react-dropdown or react-select deal with tons of options
  - what about on mobile?
- https://stackoverflow.com/questions/40692950/how-to-make-long-bootstrap-dropdown-menus-vertically-scrollable

I should add easter eggs so that real historical figures sometimes appear in the game if you're simulating at that time. How dope would it be if you're simulating the 12th century and Genghis Khan shows up in the draft

Salary cap trade stuff

FBGM rookie contract length
- https://old.reddit.com/r/Football_GM/comments/eddhp1/fixing_ai_team_contract_logic/

value should be more ovr-based
- https://old.reddit.com/r/BasketballGM/comments/ecr0mw/20192020_nba_roster_v_11_traded_draft_picks_up_to/fbk80xj/?context=3

box score order
- userTid always at top!

in football, sometimes pot is less than ovr, why?

kicker trade value

god mode options for tendencies
- sport specific options, like shot tendencies, enabling/disabling 3 pointers, etc
- have them as sliders, where 50 means "no effect", 0 means "never happens", and 100 means "always". then blend those rates with the default rates behind the scenes
- maybe redo foulRateFactor this way

illness @mattable#4273
- pass to teammates or opponents
- list of diseases, each with a different average length and probability to spread
- if can be fatal, make sure to always create new FAs
  - playoffs?

add more variance in player development with some kind of professionalism/ambition rating https://old.reddit.com/r/BasketballGM/comments/e15yuv/unpredictability_of_progression_and_the_football/

team rating
- currently for past seasons, includes traded players on both teams. so intead, store value at end of each season
  - stored value will also make power rankings simpler and faster
- show on other pages, like team history
- team potential rating?
- somehow show everywhere, like how RatingsStatsPopover is for players
- change scale, make it harder to get 100?
  - but also don't make there be no variation in default leagues. maybe make it nonlinear 90+

god mode options
- population growth
- salary cap growth
- inflation of other revenue/expenses
- make them constant, or from a random distribution?

bundle size by removing dependency (tested by adding to "external" in rollup config)
- lodash total - ~18kb in worker and ui, and basically all of that is shared so there's only benefit in replacing it all

keep box scores with feats, and ASG

SW stuff
- dynamic rather than precache like https://github.com/GoogleChromeLabs/proxx/blob/master/src/sw/index.ts maybe

hype revamp
- make more transparent
- YWT

zipped files @Jofish#5051
- https://github.com/Stuk/jszip is a bit big
- https://twitter.com/addyosmani/status/1228989899686260736 in Chrome 80

dashboard ui
- make "new league" button integrated on table - fixed top row maybe, with "new league" replacing "play"?
- team logos

https://react-hook-form.com/ for forms

more customize player options
- fixed position
- hof
- awards

football roster balance issues https://imgur.com/HmK00EF @Eddy

football OL with 49 height listed as 5'7"

football too many players retire

https://old.reddit.com/r/nfl/comments/ct3eph/im_dumbmatter_creator_of_football_gm_a_free/exjp0b9/

Could you add a page which shows all the game results on any given day? Just the scores would be cool, maybe the top performer (best gamescore player, but show their pts/reb/ast) too, but mainly just a way to see what happened in every game that day without jumping around game logs.

"if you edit a player (change nothing) and hit save changes any new relationships added  or edited will appear"

option to control retirement rate

Too few players refuse after recent change
- https://www.reddit.com/r/BasketballGM/comments/ays1wh/change_in_free_agents_refusing_to_sign

Force players to play through injury

In danger zone, button to reset to preseason. Do stats and draft and finances as best possible

load file from url https://old.reddit.com/r/BasketballGM/comments/c54rov/automatic_nba_rosters_by_understanding/es28wcf/?context=3
- explanation text?
- docs
  - The tricky part is https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS which generally prevents websites from loading data from other domains, for security reasons. As described at that link in excruciating detail, you can allow a file to be included in another domain (or any domain) with the "Access-Control-Allow-Origin" header. If you don't control your server, that's not very helpful. But I have noticed that GitHub does this automatically on githubusercontent.com, so if you make a GitHub repo, you can use a link like https://raw.githubusercontent.com/user_name/repo_name/branch_name/file.json
- https://uppy.io/
  - file sharing platforms are sources, but not destinations?
  - requires server side integration

add another season option to team stats, player stats, and leaders: All Seasons

in basketball gamesim
- if all ratings are 0, why does one player dominate?
- player with assist can be same as player who shoots

# football

some gamesim issues
- https://old.reddit.com/message/messages/ne69ad
- too many safeties

Can DL get more sacks and TFLs in FBGM? Tackle numbers on the DL are realistic now, so adding more sacks and TFLs would make it more realistic. Actually lower TFLs. There's several guys with more than 20 TFLs in my league. @☭☭#9825

make retirement more gradual, rather than hard cutoff at 29 or whatever

infinite AV is possible
- https://media.discordapp.net/attachments/331882115119448065/600596243055509516/unknown.png?width=1440&height=423

blocked fg too uncommon?

Just started playing the other day and it's pretty fun! A lot different than BBGM but the roster management is fun even if the games can feel kind of random. Few things stood out. Not sure if this is just for balance purposes, but teams are WAY stricter about giving up next year's 1st round picks than in real life. I can package 3 amazing players and the best I get offered is a 1st 4 years in the future. Meanwhile IRL 1st rounders get traded for much less (Cooper for a 1st straight up).

Also I wonder if there is a way to present a player's value in regards to the position they play. What I mean is if I want to draft a good RB in the game I have to invest an early pick, but in the NFL teams find starting RBs day 3 on a pretty regular basis (although the argument there is OL is more important for the run game than the RB) so that might actually be pretty complicated to implement.

Finally I saw dumbmatter mention this in the initial post, but there really should be guaranteed rookie contracts. They are basically standard in the NFL and I don't see why a simulation wouldn't mirror this. Just feels weird all my players only want 2 year contracts when they are usually stuck with the team for 4 years at least. Just some initial thoughts, great work overall!

keyStats for OL should not show tiny # of tackles

Great players retire too early

rookie contracts too high still?

situationally aware play calling
- pass or run, hurry up or milk the clock with lead
- kneeling to run out clock
- clocking ball to stop clock
- hail mary as a separate play type?
  - needTouchdown

if paying a lot to a QB already, don't sign another expensive one

Also I just had my rookie QB get onto the All-Rookie Team in the QB slot, but he was also slotted in as an All-Rookie punter, without having done any punts all season.

stat distribution pages

too many players playing both offense and defense
- reassess after making roster construction better. if it's still a problem, only allow starter at one position
- too many fat guys with elite speed, small guys with elite strength?

weight formula is not very good

confirm subscription works from football-gm.com
- Basketball GM Gold -> GM Gold, BBGM Commissioner -> The Commissioner in bbgm-account
- cross promote in welcome emails

redo pot formulas?

---

Add "All Seasons" option to various stat/ratings pages
- Player Ratings
- Player Stats
- Team Stats
- League Leaders
  - Also add "Career Totals" there

injury later
- slowly ramp endurance up after injury
  - really, the injury should just impact endurance and odds of reinjury. if you want to force someone to play through an injury, go for it
- injury history leads to chance of reinjury
- height influences injury probability (see same paper as age)

can i get SideBar to have open state simply passed to it? performance might be ok now

why is free agency so slow?

button on free agents screen to fill out roster with players making up to 2x the minimum

exportPlayerGamesCsv only supports basketball currently, and it's disabled in ExportStats.js. football box scores are more complicated, more derived stats

way to specify routes for ShotLocations/RosterContinuity/Depth, so they aren't included in football/basketball routes

game sim
- pick playType from (down, toGo, scrimmage, score, quarter, time)
- later
  - clock
    - pace
    - clock management, strategy
  - for 2 point conversions and extra points, penalties don't actually move scrimmage currently!
  - log clutch plays
  - blocked fg
    - count as missed field goal
    - chance for either team to return (very slim for offense)
  - blocked punt
  - missed fg/xp return

AV advanced stat
- use in value?
- OL and defense
  - need all pro modifier - but this is circular reasoning, since that comes from AV!
  - in individualPts, check if they actually seem to apply (no substantial rushing/receiving/passing stats)

what's the end state here? options:
- everything is in deion, and process.env.SPORT governs the output
  - that'd be nice, but probably unrealistic
- define minimal set of things that need to be overridden, and pass to deion like new DeionUI({...}) - probably this one!!!!!!!
  - e.g. views.. put routes.js and views/index.js in deion. but views/index.js will only have common ones. for others, pass into DeionUI, and reference both sets of views in genPage in routes.js
  - do this, but try to also do the process.env.SPORT solution when possible
- deion remains a set of functions/classes/modules, to be pulled in externally piecemeal. if something internal needs to be overriden, make it generic or a factory or DI or have it accept a parameter to allow overriding

injuries
- make more representative of football: https://footballplayershealth.harvard.edu/wp-content/uploads/2017/05/06_Ch2_Injuries.pdf

how to get types working, options:
- make anything depending on an override or sport-sepcific type into a factory function or generic, initialized in deionWorker or deionUI and then passed around
- pass around overrides manually everywhere, not making it a module
- move everything inside deion

how will deionUI(overrides) work with types?
- can pass them as generics, then apply them to factory functions
- Import modules from deion. Add things like extra views. Apply factories/generics.

type better
- skills/compositeRatings - should be RatingsKey, not string for components. And PlayerRatings
- PlayerStatType should be sport specific
- getCopy/getCopies and Cache
  - awards should return Awards
  - players and playersPlus - Player<> and Player<MinimalPlayerRatings> should be Player<PlayerRatings>
- most MinimalPlayerRatings uses should be generic and take PlayerRatings

split more from deion
- processInputs for views only in one sport (depth, shot locations)
- worker API functions only in one sport (depth)

yarn workspaces
- see branch football-yarn-workspaces - all works except karma

show game stats in player page

contract demands and position assignments should be based on which position maximizes p.value, not which position maximizes ovr. would you rather have an 80 ovr qb or a 100 ovr kicker?

RatingsOverview - could put in deion, with config to specify categories and names from getCols
- RatingsForm has this already! re-use

---

on import, error if any player/draftPick references an invalid tid

on league import, override numTeams if teams are supplied in league file

during free agency, after you sign all your free agents it should automatically take you to the league free agents and skip the step of having to continue

if a trade is highly unfavorable to the user, pop up a warning confirmation dialog

live game
- field with drive summary, football, direction, and last play

more accurage game sim
- State machine. Simulate flags. Distinguish scrimmage and ball position. Transaction rollbacks
  - https://thisrobot.life/guides/comparison-with-xstate.html

---

in table, sort position by constants.POSITIONS order (like roster page in football)

revise re-signing - too many good young players become FAs

everywhere contract is displayed, make it in italics if not guaranteed
- currently only on roster i think. make a component!

Add playoff seed # to the history page

option to have no draft, players just become FAs

"Accept Trade" button on trading block

AI teams should adjust finances
- and reset after user is fired

better salary AI
  old players undervalued
  dynamically set based on cap space
  https://www.reddit.com/r/gamedev/comments/4omk8h/simulating_marketbased_pricing/
  FAs less likely to sign https://www.reddit.com/r/BasketballGM/comments/4qla6t/free_agent_mood/d4ww715?context=3

if an ad blocker is used, no need to save that space on the right
- already done for Gold/localhost in initAds, but how to do it for ad blocker too?

open dashboard, open league in new tab, now shell on dashboard is as if in league
- happens because there is no way to distinguish "local.updateGameAttributes called to initialize new league that the user clicked from the dashboard in this tab" and "local.updateGameAttributes called from another tab, but this tab has lid === undefined so we'll leave it in that state"

login -> account -> doesn't say logged in, sometimes? but account shows in navbar
- happens if you log in in one tab while having another open, then in the 2nd tab go to achievements
  - only in firefox?
  - no, user says chrome too

service worker - workbox
- more explicit upgrades https://deanhume.com/displaying-a-new-version-available-progressive-web-app/
  - workbox-window

https://developers.google.com/web/fundamentals/app-install-banners/

after preseason, after player development, recalculate player value
- use ovr vs PER formula, but with offset based on prior value

Don't allow play if versions in tabs don't match
- close worker?

---

React.StrictMode
- react-sortable-hoc findDOMNode
  - switch to react-movable works, except in Safari https://github.com/tajo/react-movable/issues/30
- reactstrap findDOMNode

to send notification to correct screen, need `conditions` in views/allStars (and other getOrCreate calls). should be possible right? yeah, could request hostID from shared worker, and then sent it to runBefore functions, but... is it worth it? maybe not

BoxScoreRow
- link to team should be for the season of the ASG, not current season always (in boxScore.season but not passed to Row)
- highlight user team abbrev

Difficulty fudge factor should only be for user team (finances, trades)
- for trades this is hard because valueChange does not know if it's the user's team or not, need to accept another parameter

re-evaluate contracts
- somehow market based

make AI smarter about contracts
- then do cool shit, like a tunable "randomness" factor or something that lets you tune player development, and also overall talent level, and also distribution of different ratings (to sim different eras)

somewhere, show average age of team

increase PG cutoff
- https://www.reddit.com/r/BasketballGM/comments/8lfyuh/7_center_turns_into_pg_when_the_season_starts/

index updating
- currenty: check if the indexed property has changed, and only update a specific index then
- would be better: make _dirtyIndexes per index, not per store  
- even better: incrementally update index

later
- in new league: set rookie contracts appropriately
- in new league: initialize rebuilding/contending to non-random values
- don't include core.debug in prod builds?
- steeper penalties for unbalanced lineups
  - increasing perimfactor not enough - need to reevaluate formula. see all_bigs.json
    - perimfactor shouldn't be needed. just use the synergy stuff. should be offense and defense. check values for normal and extreme teams
- simulate draft from past seasons, to correctly assign contracts (don't need to populate actual draft info)

NEED TO FIX TRADE AI
- make tests of trades that should/shouldn't happen
- example: should never offer a strictly worse pick for a better pick. or at least not commonly

no POT mode, to make it harder

persist fantasy draft results
- make an array of draft results
- viewable somehow - need to track when fantasy drafts happened and add them to draft results menu

---

more flexible auto play - shorter period of time, individual phases, etc. would require non-alert dialog

1. If there was a "select all" for not including draft picks in trades. So instead of going down 1 by 1 to check don't include you could just say NO to trading any of your 4,000 picks. 

2. If searching player rating also included contracts. Usually you'll want to find a high potential guy on a cheap contract.

career totals on player pages https://www.reddit.com/r/BasketballGM/comments/7ya1yu/any_more_thoughts_on_the_beta/duptp08/?context=3

open multiple leagues from dashboard at the same time - Invalid cache status "filling"
- looks like flush is being called while status is "filling", can that be short circuited since idb.cache has been redefined? lid is different, or the hostID is different?
  - happens because it calls "flush" when closing an existing open database. should be more explicit about state of loading (no league loaded or loading, league X loaded and no league loading, league X loaded and league Y loading, no league loaded and league Y loading)
  - then will also need a way to prevent UI errors, if a UI update function is running and expects e.g. g to be populated but it's not - UI should check the aforementioned state as well and wait for loaded

reevaluate FA system - too easy to rebuild
- too many young stars available
- first pick at most players

move react up, before worker is initialized, so compareVersions error can be displayed there

somehow display synergy, maybe on roster page

watch list players should result in notifications when things happen (FA salary drops, trades, signings, release, retire)
- https://www.reddit.com/r/BasketballGM/comments/7h3eqy/simple_feature_request/

advanced team stats
- strength of schedule: https://www.pro-football-reference.com/blog/index9e6d.html?p=37&cpage=1
  - to set up this system of equations, need to know the schedule, but that is not stored anywhere currently. need to persist original schedule. maybe only soft delete games as they are played, or copy to another table?
  - use https://www.npmjs.com/package/linear-solve to solve
- team ortg/drtg/nrtg adjusted for strength of schedule

box plus/minus
- https://www.basketball-reference.com/about/bpm2.html
- http://www.apbr.org/metrics/viewtopic.php?p=35755#p35755
- VORP

advanced stat table too confusing? needs vertical dividers/spacing?

use something besides PER in player value formula

new adv stats in roster page?
- switch PER to WS/48 - roster.js now pulling both, then eventually switch Roster.js
- same for HoF
- OR, wait for BPM?

per 100 possessions and totals toggle on team stats page

remove babel plugins
- https://github.com/babel/babel/blob/71e7a7b1e0df42df4ee47a01a6218adf40e99cda/packages/babel-compat-data/data/plugins.json

remove polyfills
- get rid of getAll polyfill when safari 10.x usage goes to 0
- others too!

add franchise leaders (stats) to team history page

marker for feats from the playoffs/finals https://www.reddit.com/r/BasketballGM/comments/6gpf1f/suggestion_a_marker_of_some_sort_next_to_game/

some way to see draft picks by team, now that there are AI trades

AI trades
- notification? only for big trades. quantify! maybe show that info in transactions page too

AI propose trade to user
- need way to show popup with link to trade page

colors
- color ratings on ratings page (and tables), just like ratings popup
- color stats in ratings popover

force single tab per league
- when < 5 seconds, wait for another heartbeat before deciding
- check for collission in setInterval, and somehow show error page if that happens

shared worker
- namespace stuff, after it's working for one league
  - attach lid to promiseWorker instance in host (call it "metadata"), update lid if it changes, and attach to every request from host
    - then from worker, pass into toUI
  - query API: flag to determine if broadcast or single response. default single response. optional last arg, so single response use case is same API as now
    - if broadcast, then response is always undefined
    - broadcast needs to be namespaced, too. like only "update all league 5" not "update all tabs open in every league"
      - figure out some way to abstract... like maybe a conditional broadcast function defined based on metadata
  - namespace leagues (or force only one league)
    - namespace locks, g (in worker only), idb.league, and idb.cache
    - all common functions, accept g as param
    - something to handle init/close of tabs
    - look at all toUI calls
  - disconnect league when none are left registered to promise worker (so need api to get all metadata)

when dirty on close, show warning window, and initiate flush (if not already in progress)
- hard to coordinate across UI and worker...

better loading screen, after React takes control but before initial page is rendered - because it can be slow for loading a league

this shit is UGLY UGLY UGLY, fix ASAP!!!
    if (typeof it === 'function') { return; }
  http://railsware.com/blog/2017/01/10/mocking-es6-module-import-without-dependency-injection/

get tests working
- db.getCopy.teams
  - operate on individual functions? can export them just for tests
  - confirm operations that don't require IDB
  - confirm getAll updates from cache

refactor
- clear, delete need to handle indexes

document cache data format and API!
- different things are cached, depending on object store
- all modifications go into cache
- cache mutations are dangerous, see getCopy
- read from just the cache if you're sure everything is there (like an active player). otherwise, read from db and augment with cache (because anything could be in cache, even if it's not normally.. like retired player added to watch list). getCopy variables do this
- promise microtask worker crap - for firefox support, if you start a backboard tx manually, you can't do any promise/asyncawait stuff inside the callback

----

situational awareness
- possession length
  - ? timeouts to advance ball (shorter possession) or make subs
  - ? shot clock violation
- fouls
  - ? sometimes foul when up 3 and not much time left
  - ? hack a shaq
- rotations
  - ? play stars more at the end of close games
  - ? sub in good FT shooters in late game situations

https://github.com/pinojs/pino

https://www.reddit.com/r/BasketballGM/comments/57cux2/small_issue/

Trade/Signing Negotiation Difficulty - Have from a scale of 1-100. 1 = Signing players will be easy and salary dump trades. 100 = Most players ask for max contracts, and trading and salary dumps will be harder. 50 = Normal

---

REACT later

Draft button on player pages https://www.reddit.com/r/BasketballGM/comments/53op85/feature_request/
Trade Away button on your own players

keep showing splash screen until first view hydrated

Draft
  make it cooler
  fantasy draft is hacky and glitchy - do better!
    https://www.reddit.com/message/messages/6ip35c

---

Tools > Export Stats only has latest team, for in-season trades

filters on event log
  tragic deaths https://www.reddit.com/r/BasketballGM/comments/52ljuy/would_it_be_possible_to_add_a_memorial_page/d7ou7ov?context=3

make positions edited in god mode sticky, like custom roster

different height distributions by country https://www.reddit.com/message/messages/644he7
  even global setting would be nice, for country specific leagues

make FAs less eager to sign with bad teams
  alternative idea to just threshold: https://www.reddit.com/r/nba/comments/4tfaph/i_made_basketball_gm_a_free_basketball_management/d5hqqal

newScheduleCrappy should be better

international names
  accurate faces (race)

substitutions fucked up in long games https://www.reddit.com/r/BasketballGM/comments/44nv0s/100000_minute_quarters/

more detailed negotiation screen https://www.reddit.com/r/BasketballGM/comments/416o5g/well_this_is_new/cz11w9v?context=3

delete most negotiation code
  remove restriction for one negotiation at a time
    make sure re-signing is handled okay still
    make sure multi team mode is handled okay still
    get rid of negotiations object store

bold highest values in career on player stats tables like wikipedia https://www.reddit.com/r/BasketballGM/comments/4rgn0p/two_statrelated_suggestions/

Add 'Free Agents' to 'Teams' dropdown menu on 'Player Ratings' page. https://www.reddit.com/r/BasketballGM/comments/3t4kl6/suggestion_add_free_agents_to_teams_dropdown_menu/

team dropdown in dashboard

https://www.reddit.com/r/BasketballGM/comments/3gjqgd/lets_brainstorm_a_bit_about_this_30_seasons/

fantasy draft summary https://www.reddit.com/r/BasketballGM/comments/3g4p5a/issues_with_fantasy_draft_records/ (link is in player transactions)

crime https://www.reddit.com/r/BasketballGM/comments/3g1ngn/its_2015/ctudznu

different jump to menus for season and team specific pages?
  or unify
  add gamelog, roster, team finances
    get rid of "More:" links

minutes directly, not by +/-

use positions for roster building and rotations
  free agents and trades matters....
  bump up penalties for unbalanced teams
    the tricky part is that finding a factor and using it to create variance leads to variance on the CPU-generated teams
    could play with turnover probability too
    rewrite gamesim, fixing all these problems? also, coaching less agressively when game is blowout, playing stars more in important games, ...
    tricky: good teams have high skill players, who are going to do really well in any synergy metric. so it's hard to punish unbalanced teams through synergy without decreasing parity by a lot
      hacky approach: stay with something similar to current system, but with an extra penalty for very unbalanced teams (could be sigmoidal so it only affects really poorly balanced teams)
    probably will need to increase synergyFactor
    might need to tweak some probabilities if this changes stats too much
    redo ovr formula
    decrease importance of height: https://www.reddit.com/r/BasketballGM/comments/6rg7yr/height_is_too_impactful_in_bbgm/

Make AI smarter when constructing teams. Then, if that works, make synergy more impactful

Too many 8 seeds winning over 1 seeds
  http://www.reddit.com/r/BasketballGM/comments/39j6gy/this_happens_way_too_often/cs4lor3
  http://www.reddit.com/r/BasketballGM/comments/391et4/1v8_seed_theory_100_years_of_simulation/
  point differential stuff - BBGM teams seem better than NBA teams, but still lose in 8-1 (and have worse records)
    some of this could be running up the score against bad teams

playoff and regular season playing time and injury differences http://www.reddit.com/r/BasketballGM/comments/38f7dj/playoff_variance_seems_a_little_high/crxh643

when retired, player page (and other career-level things) should display most common pos, or maybe composite that us union of all positions (like GF for someone who was both SG and SF)
  draftSummary, hallOfFame, player, playerStats (careerTotals), teamHistory, anything else?

delete old data bug http://www.reddit.com/r/BasketballGM/comments/39mi4p/bug_pers_roughly_double_after_deleting_unnotables/cs8difx?context=3

no/fuzzier ratings mode http://www.reddit.com/r/BasketballGM/comments/35qftt/statsonly_modeless_accurate_stats/

compact feats UI http://www.reddit.com/r/BasketballGM/comments/341k8e/can_we_have_statistical_achievements_sorted_by/
  add subtype or something to feats

expansion/contraction

DEATH
  types
    plane crash (whole team, 1 every 200 years)
      give extra draft picks as compensation?
        what would the nba do?
      reset owner mood, new owner message

screenshot
  what do i link to? Imgur landing page? or include social links directly?
    include social links directly. actually that should be the first-level UI - you don't click "Screenshot" you click "Share to X" where X is Twitter, FB, Reddit, etc
      probably still save to imgur first
      autocomplete wording: "Draft players, manage teams, go for the championship. How good a Basketball GM are you? Find out at http://basketball-gm.com"
      also autocomplete hashtag
  add prompts to take screenshots at various points
  things can get cut off right, like wide tables in player pages

composite ratings / scouting report
  "Shooting", "PG Skills", "Paint Scoring", rebounding
    are these ones really complicated enough to warrant display?
  height trait http://www.reddit.com/r/BasketballGM/comments/2uccrl/viewable_composite_ratings_what_do_you_think/co7a4gr
    make it position-dependent.. but then should all this be position dependent?
  "The Shooting, Defense, and Style groups are the ones I'm finding Im paying most attention to"

team and league records (highest scoring game, etc)
  http://www.reddit.com/r/BasketballGM/comments/2sl13h/many_people_have_requested_some_kind_of_all_time/
  show in
    player page
    team history page
    season summary page
  option to exclude notable games box scores from deletion

best stats for every player (e.g. most points in a game)
  could cache previous value from player objects when read in, and only write on new best

transaction log
  anything else to add or anywhere else to use this feature? ask
    big AI free agent signings
    team transactions page

github
  bitbucket issues

player.updateValues.getStats doesn't really make sense. Should get all from past 2 seasons, sort by PSID, and take stats up to 2000 minutes

new achievements
- gold
- 100 year championship drought before winning another (cubs)
- win title without any 1st round picks
- "On the edge" – Play 28 games in playoffs and win finals (4-3 in each series)
- Have more than 100 players who played most of their career on your team be HOF @Happy_McSmileyface#1538

PLAYER DEVELOPMENT REVAMP
-------------------------

shouldn't have literally every aging player turn into a great shooter

old players are currently undervalued

Too many good free agents available at the minimum: http://www.reddit.com/r/BasketballGM/comments/2sxs4l/love_the_game_suggestion_for_free_agency/

TEAM.VALUECHANGE REVAMP
-----------------------

https://www.reddit.com/r/BasketballGM/comments/585af3/the_trade_ai_is_too_easy_to_abuse/
loyalty: players should be reluctant to leave teams they've been on for a while.
http://www.reddit.com/r/BasketballGM/comments/2v26p1/how_are_you_exploiting_the_trade_ai/
http://www.reddit.com/r/BasketballGM/comments/255sta/i_think_we_need_longer_dynasty_achievements/che050a?context=3
IMPORTANT http://www.reddit.com/r/BasketballGM/comments/20i6v3/still_too_easy_to_trade_for_drafted_players/
  just drafted players are undervalued, possibly related to the following issue
second round draft picks are undervalued. also, giving away a pick should never make a trade worse, but sometimes it does now. http://www.reddit.com/r/BasketballGM/comments/2bg3zx/simple_feature_mark_players_as_offlimits_when_we/cj5ap89
  similarly, trading block for nothing can net you second round picks
trade for tons of cheap second round picks, then use that to trade for good asset: www.reddit.com/r/BasketballGM/comments/27wjnp/33_pennies_for_a_dollar/
release and resign pick exploit http://www.reddit.com/r/BasketballGM/comments/1zn61h/finances/cfvzr35\
some limit on trades so people can't make 1000 slightly beneficial trades: http://www.reddit.com/r/BasketballGM/comments/1zzwbs/suggestions_on_trades/cg0e0dg
  probably make opposing owners less likely to trade as the number of proposed trades increases in a season
Eventually:
  "What would make this work?" functions should know about contending/rebuilding. Contending teams should be more eager to offer up young/cheap players, rebuilding teams should be more eager to offer up old/expensive players
    basically, they should view the trade from the other team's perspective, not just their own
  Can I provide better feedback about trade? Like if it's close or not? Or if it's rejected because of cap space issues?
  Set params with optimization algorithm
  Fix needToDrop stuff
    Problem now is, contract gets pushed into someone on the roster and it's lost. This is especially obvious if there is only one player in add and his contract is pushed to roster, then the trade is nothing.
    Probably not that important, since teams almost always have shitty players at the end of their rosters
  EXPLOIT that might be tricky to solve: in the "resigning players" phase, your free agents should still count towards your cap. Otherwise, you can trade to take on salary and then sign your players over the cap
  Should draft pick contract "worth" be determined better somehow, like it is for normal contracts? probably yes
    does this allow removal of fudge factor?
  population (i.e. richness) should influence opinion of contracts

CURRENT
-------

game log for individual player
  in each box score, include an array of players in the game. index on that.
great ideas: http://www.reddit.com/r/BasketballGM/comments/2q9yn8/ideas_questions_and_feedback_feel_free_to_add/
career ending "injuries" http://www.reddit.com/r/BasketballGM/comments/2oo32x/are_there_career_ending_injuries/
"My Career" page with GM stats across teams http://www.reddit.com/r/BasketballGM/comments/2gc4sf/gm_page/
+/- http://www.reddit.com/r/BasketballGM/comments/2cpdxg/both_individual_and_5man_units/
season preview
  overview of user's players ratings changes
  overview of notable ratings changes in other players
  MVP race preview
  power rankings
account
  more pages
    account/edit
    account/:username (public profile showing achievements)
"Watch list" of players the user is interested in, mainly for free agency
  add "actions" where appropriate, probably as output in player.filter so it can be used elsewhere
    negotiate
      factor out negotiateButton code from freeAgents and negotiationList and player page (if possible)
      some heuristic to see if player is a negotiable
      show mood too?
    draft, fantasy draft
      if prospect, add "draft" button?
      if so, factor out from draft page and add on player page
    ADD TO PLAYER PAGE, elsewhere?
show prospects before draft
  EVENTUALLY
    ratings should really update annually, just like in normal years
      fuzz changing for prospects should factor in changes in scouting budget
    movement between draft classes
      allow promising to draft a player at certain position to influence decision
career stats
  "All Seasons" option - add each unique player/season combo as a row, include column for year
  column/table widths?
  EWA in averages should be average
    same with per36
per36, totals, playoffs options elsewhere
  currently in playerStats and watchList, but too much copy/paste. refactor before expanding
  team history
  roster
per 36 stats in player pages http://www.reddit.com/r/BasketballGM/comments/1ofz6s/per36_stats/
http://www.reddit.com/r/BasketballGM/comments/1sarll/open_source/cdxx3ql
free agents going unsigned?
  salary cap exception? too complicated?
    how much?
    who gets it? only if over cap when free agency starts?
    messages about it
      anywhere salary cap is displayed, including team finanaces
      contract negotiation - show warning if the exception will be used
      resigning players page
      update manual
    implementation
      flag in root of team object - exception available, exception used, exception not granted this season
  add some fucking market shit. calculate the salary demanded by free agents vs cap space available, then adjust free agent demands somehow
    this should be part of the daily updating. if everyone is capped out, drop all salaries to minimum.
notification system
  customize: http://www.reddit.com/r/BasketballGM/comments/1re3ea/new_feature_notification_bubbles/cdmjdyn
  what about for small screens? maybe just show one at a time. is this actually a problem?
  also log these events:
    fired - log, but don't show
    new team
  notify
    when something happens to a player on the watch list
    big AI moves - trades, free agent signings
  merge "retired" and "HOF" notifications for a player on the user's team
  important notifications should be a different color, maybe require acknowledgement before closing
    errors
    refuse to sign
    retire
  colors/icons for good/bad things http://www.reddit.com/r/BasketballGM/comments/22bpwm/suggestion_notification_improvements/

BIG NEW FEATURES
----------------

player stat summaries http://www.reddit.com/r/BasketballGM/comments/2bf4z0/functionality_of_the_game_vs_2k/cj5ir16
unlimited draft class support
  http://www.reddit.com/r/BasketballGM/comments/2ajw7c/about_custom_draft/civz0n6
  take this opportunity to add some stuff to gameAttributes too
trading block should allow for multiple (different) offers from the same team
display of relative ratings like https://mail.google.com/mail/u/0/#inbox/144a4a04330edf3d
trade improvements
  refactor trade module with all the below in mind
    clean up even more?
      should create and updatePlayers be merged? updatePlayers already updates tids too
      either way, they should take partial objects and fill in the default/existing values
  trade suggestions (and trading block) should know salary rules
    HOW?
    team.valueChange could be made fast if I allow an extra argument to pass pre-fetched values from the database
    quick fix: check box to only look for teams under the cap http://www.reddit.com/r/BasketballGM/comments/1qh107/proposed_trades_question/
  trades between AI teams
    call team.checkRosterSizes after this if it's in between days
team switching after being fired
  keep track of what team the user controlled, so stats for the user (not the team) can be shown
random events
  like.. player gets suspended, out X games. or player gets into fight, fan support drops. etc.
more detailed draft - slower picks, trades, etc.
  slower picks http://www.reddit.com/r/BasketballGM/comments/1r70dv/trade_picks_during_draft
  sort by generic value (current) or team-specific value
  trade picks - note that the code in teamValue will need to be modified to account for the lottery and available players in the draft class
awards watch
contests: post roster file and goal

BIG NEW GAMEPLAY CHANGES
------------------------

Extended free agency
  order of AI team signings shouldn't be linear
  0 year contracts http://www.reddit.com/r/BasketballGM/comments/1p0sa8/new_feature_extended_free_agency/ccy4gvp
  AI teams can release players to sign a better free agent?
fix contracts, signing
  goal: reasonable total payrolls, no good free agents left every season
  if WS distribution matches NBA, then look at $ vs WS. even better, build a multivariate model with age
  contracts should take ratings into more account, since stats on a good team are inflated and stats on a bad team are depressed
  player contract amounts http://www.reddit.com/r/BasketballGM/comments/1kj0p0/can_i_turn_off_firing/cbpxjyj?context=3
gameSim
  mediocre three point shooters should shoot it less http://www.reddit.com/r/BasketballGM/comments/2bwvpj/psa_players_who_shouldnt_shoot_3s_continue_to/
  smart substitutions http://www.reddit.com/r/BasketballGM/comments/2b9w78/went_7012_with_this_roster_is_this_really_that/cj3zgui
  big men should score more, shoot more FTs http://www.reddit.com/r/BasketballGM/comments/2amqpo/how_come_all_of_the_top_scorers_are_always_3_guys/
  pos/neg effects add on like civ4 defensive bonuses?
  balance http://www.reddit.com/r/BasketballGM/comments/1jfcjw/game_imbalance_fc_with_rdi/ http://www.reddit.com/message/messages/1097mj
  http://www.reddit.com/r/nba/comments/1j1e6q/i_made_a_singleplayer_basketball_management/cbfzr43?context=3 http://www.reddit.com/r/BasketballGM/comments/1k1881/pf_stands_for_powerful/
    too easy to get high percentage inside looks even with a team of all bigs?
    or should some of the "bigs" really be smalls, just mislabeled as PFs?
  make it less easy to get high percentage shots if there is no ball handling
    tweak perimFactor and synergyFactor.
  increase turnovers, particularly if perimFactor (or similar) is low
  increase fouls if perimFactor (or similar) is low
  assists should be function of speed, since those players have the ball more
  situational awareness http://www.reddit.com/r/BasketballGM/comments/1yg6wi/end_of_game_simulation/
  mediocre players on bad teams should be less efficient (shouldn't put up such a high PER, which falls if they join a good team)
add free agent to the end of roster
"My Player" mode http://www.reddit.com/r/BasketballGM/comments/2swmwj/there_should_be_a_game_like_myplayer_in_2k/cntkvj4

MINOR FIXES
-----------

documentation
  http://www.reddit.com/r/BasketballGM/comments/2agxoe/questions_and_suggestions_from_a_new_player/
Add MVP and Titles columns to HoF table
Make good young players much less likely to become FAs
don't need to store abbrev with awards, just tids
  fix display in season summary (correct in historyAll)
show team records in playoffs page
on team history, show counts of conf/league championships, hall of fame players, etc
if a player refuses to resign, that decision should also be reflected in free agency (don't recalculate mood)
add "drb" to usage so that good ball handlers shoot more (favor guards over bigs more)
in player page, show red/green for ratings changes from the previous year, maybe as heatmap
in ratings tables, show dpot and dovr columns? maybe?
league leaders glitch http://www.reddit.com/r/BasketballGM/comments/1r20x5/league_leaders_bug/
merge game.play and freeAgents.play
replace random.gauss with random.realGauss
don't need to check every team's roster limits every time games are played - could auto keep AI teams in line after any trade (with user or between AI teams), and then only the user's team needs to be checked
schedule page (and dashboard and maybe gamelog) should show opponent records

LOW PRIORITY
------------

track longest W/L streaks
tooling
  istanbul https://github.com/karma-runner/karma-coverage
team chemistry http://www.reddit.com/r/BasketballGM/comments/2oco2a/simple_suggestion_team_chemistry/cmrpap6?context=3
use compound index on season + team for games obectStore in helpers.gameLogList, views.leagueDashboard, maybe elsewhere
upcoming free agents page should show at least some information about signings (or non-signings) during re-sign phase
box plots / distributions
  "it'd be great to overlay your roster to see where you stand. Maybe click on a name in a list to add or remove it from the display. Do I have a fast team? Do I have a three point shooting team? Are we big and bruising and slow?"
compare players http://www.reddit.com/r/BasketballGM/comments/1saclf/suggestion_compare_players/
awards
  show awards count in hall of fame
add numbers for players
  ability to retire numbers
fantasy draft
  when fantasy draft is over, go to summary of the draft
    do this in core.draft.untilUserOrEnd
  add entry for fantasy draft summary to draft history dropdown?
league settings
  enable/disable trading rules
cross-league play
mobile UI, bootstrap 3
  do something about hover tooltips
    injury
    skills
      for injury and skills, maybe make the whole block a hyperlink that opens a popover
        make sure to use on player page too.. can i use helpers.playerName.. there too?
    table headers
    others?
some kind of playoff series overview page, including box scores for easy access
luxury tax money should be redistributed to non-taxpaying teams (or teams under the cap?)
A year-to-date comparison of team finances with the previous year.
more detailed player moods - http://www.reddit.com/r/BasketballGM/comments/1k4val/players_refusing_to_sign_bug/cbln1oo?context=3
  player personality, team chemistry
  http://www.reddit.com/r/BasketballGM/comments/1tkw3e/idea_player_traits/
dashboard info should be on a widget accessible from any screen
player search page
  show stats, ratings, contract, etc. (customizable); allow filters to be applied. also filter by skill icon
  search by stats, ratings, or attributes
  trade for button, or sign button if free agent, or draft button if draft prospect
    same contextual buttons for watch list
    can this become main UI for drafting (at least fantasy draft)
finances
  too easy to make big $$$
    owner should take profits each year
  AI teams should adjust spending
player morale - punishment for tanking
harsher, more realistic luxury tax
midlevel exception
more refined control of playing time
  http://www.reddit.com/r/nba/comments/1j1e6q/i_made_a_singleplayer_basketball_management/cbaegpq
  http://www.reddit.com/r/BasketballGM/comments/1qaml8/playing_time_explain_to_me_like_im_8/
  just set minutes directly? any minutes not included, leave up to coach's discretion
draft
  randomness in picks should factor in relative ratings http://www.reddit.com/r/BasketballGM/comments/1l1713/the_draft_still_needs_some_work_it_seems_my/cbutw7v?context=1
trades between AI teams
  each day, pick two random teams. if a trade can be found that both teams like, do it
    generalize core.trade.makeItWork and other parts of core.trade
  transaction log is necessary to keep tabs on this stuff
  also propose trades to the user, somehow
core.team.valueChange should be used to pick which free agents to sign in core.freeAgents.autoSign, but that would be a bitch beacuse of how transactions are set up
  also for resigning players in core.season
trades
  cash
    estimate value of cash - different for different teams? depending on cash, net profit recently, and market size
    upper limit? what is NBA rule?
  more feedback from AI
    if trade is close/far from working, return different messages
    display some indication of what a team wants to do on the trade view, e.g.
      "I need to cut my payroll and start making more money."
      "I could really use a good rebounder."
  sign and trade (only during resigning phase)
god mode
  options
    disable ratings display
  edit other player attributes (draft, etc)
export/import roster
  some way to specify startingSeason
  easily edit in excel?
increase hype for big free agent signings
how to handle aggregating stats for players who played for more than one team in a season? add them all up in ps in db.getPlayers
  for roster, want just a player's stats with this team this season
    this currently works, just pass a tid
  for player stats view, want total among all teams for one season
    no pass tid and you only get the latest row. need added logic to do sum
  for player view, want separate and combined rows in careerStats without fucking up totals (including PER)
    no pass tid and you get each team separately, but no merged stats as above
contracts
  maybe make them nonlinear.. role players lower, stars higher
    compare to NBA contract distribution
if fouling out drops team below 5 active players, play fouled out players but add a FT each foul (technical)
show old contracts on old roster view
core.trade refactoring
  validateSavedTids crap should be in trade.js.
  trade.summary stuff should be automatic and stored in tradeStore
  trade and clear buttons should be disabled during gameSim, with message like in team finances
final score, hall of fame
  influenced by size of city (see: difficulty in views.newLeague)
AI modules that contain functions which are called to determine actions
  things to regulate...
    draft picks
    signing free agents
    resigning players
    trades
    budget items (like from team finances view)
    releasing/buying out players when over limit
some UI showing the state of the team's synergy. maybe like an advisors screen that suggests what kind of player is needed to improve synergy
  also can respond to budget changes
  more general: have "media" reporting things like 10 worst contracts, etc
like on team finances page, anywhere else to add help popups?
  should this be abstracted rather than just inline in views?
  inline anything from the manual?
player mood should affect AI team signings - or should it?
  for resigning players
  for signing free agents
AI updating of *Budgets and ticket prices
  maybe not necessary at this stage?
  call core.finances.updateBudgetRanks() after
update formulas
  nationalTvRevenue
    same for each team, change contract year by year and display in team finances
  localTvRevenue
    eventually, t.seasons[0].tvContract

@TheRealGWood#4891 Team traits
  Have you ever played CK2?
  I ask because the more comments I see like that reddit post the more simple I think replacing Mood with traits would work. 
  CK2 uses them. You can created TRID trait ID store as 1-10 or something fir starters-
  Injury prone - 10% higher injury frequency 
  Chronic injury- 20% higher injury chance, 10% higher - result from injury 
  Erratic- -5 Mood, -5 for every other erratic or Ego
  Ego- +5 mood, -10 minutes under 30 or usuage under 28%
  Demands a Trade- Won’t resign. -10 team mood 
  Team leader- +5 team mood, +1DIQ team, +1 OIQ team
  Savy Vet- better team progs, +1 team mood , unhappy if losing 
  Team player- +1 team mood
  Ball hog- -1 team mood +1 mood if usuage over 25%
  Farewell season- +3 in all traits final game and forced retire at end of season, +1 team mood
  Franchise player - (only over 70’s) max 1 per team or mood= -10, 
  Star- team mood + 0.5, savy vets more likley to sign 
  Bookworm- +3 OIQ/DIQ 
  Idiot- -3 OIQ/ DIQ , team mood -1

  Team traits-
  Deep playoff run= (CF) team mood+ 2
  Chip- team mood +1
  Got a star- team mood +2
  Has franchise player- Team mood +1
  FAiled to make playoffs ect....

  This would allow for DM to later add:
  Lazy
  Hardworking
  Workaholic

  Out of Shape 
  Prime Shape 

  Streaky 
  Consistent 

  Clutch
  Choke artist 

  And settable traits-
  Minutes restriction 
  Load management 
  Sixth man (won’t start)
  Primary ball handler 
  Primary scorer 
  Go to Shooter

FUTURE
------

event log UI
  allow filtering type with checkboxes
  what about events with no tid? they are currently not viewable
shot charts showing hot spots (red/yellow/green) based on shot location data
If you are simulating through the whole season and execute a trade while simulating, it will continue simulating even if you are over the roster limit. http://www.reddit.com/r/BasketballGM/comments/1xch01/trades_after_season/cfamo73
hire/fire different coaches with different strategies
boxplots for shot location stats, plus comparison to NBA data
import/export stuff
  online "locker" that you can sync saved games to
  league names
    "Edit" button between "Export" and "Delete" - set in leaguesStore and gameAttributes
      move delete/edit/export under one button, "manage". have the 3 buttons pop out in place when you hit manage, then it functions as it does now. popped buttons can be colored too, then
moving to other cities
team finances view
  compare bar graphs against league averages?
different size stadiums, building new stadiums
tv revenue as a variable
  local tv contract - $10 million
    base on tvContractAmount, tvContractExp
    will be a deal from 3 to 5 years in length
    based on...
      region population
      "hype"
      random noise
      "random event" - competition between two networks, Sports TV and The Basketball Channel
    when renegotiating and really bad, the guy pretends not to know you - "Atlanta Herons? Is that the team from the Mexican/Canadian/Arena/Indoor/Xtreme Volleyball/Soccer/Tennis/Racing/Curling/MudWrestling League?"
input to helpers.formatCurrency (and all currency in variables everywhere) should be in 1000s of dollars and then only converted to millions when displayed
AI teams should have to deal with fuzz too
views.teamFinances should merge db call with team.filter to get seasonAttrs, but that will require rewriting seasonAttrs handling in team.filter to handle multiple seasons.
live play-by-play simulation
  slow it down http://www.reddit.com/r/BasketballGM/comments/1pu92x/new_feature_live_playbyplay_simulation/cd6xq54?context=3
  change of possession with no rebound/turnover?
  could fake where the shots are to display graphically
  allow the user to make substitutions in realtime
multi team trades

# Pre-JavaScript TODO

csrf protection
  even for ajax https://docs.djangoproject.com/en/1.2/releases/1.2.5/#csrf-exception-for-ajax-requests

# BELOW IS OLD STUFF

AI (NON-GAMESIM)
----------------
AI teams release/buy out players to sign a better free agent
